syntax = "proto3";

import "swap.proto";

// Service Interface 
service TradeService {  
  rpc Markets(MarketsRequest) returns (MarketstReply);
  rpc Balances(BalancesRequest) returns (BalancesReply);
  rpc Trade(TradeRequest) returns (stream TradeReply);
  rpc TradeComplete(TradeCompleteRequest) returns (stream TradeCompleteReply);
}

// Messages
message MarketsRequest {}
message MarketstReply {
  repeated string quoteAsset = 1;
}

message Balance {
  string asset = 1;
  int64 amount = 2;
}
message BalancesRequest {
  string quoteAsset = 1;
}
message BalancesReply {
  repeated Balance balance = 1;
}

message TradeRequest {
  SwapRequest msg = 1;
}
message TradeReply {
  SwapAccept msg = 1;
  SwapFail failure = 2;
}
message TradeCompleteRequest {}
message TradeCompleteReply {}
